apiVersion: v1
kind: ConfigMap
metadata:
  name: mongodb-java-configuration
  namespace: {{ .Release.Namespace | quote }}
data:
  {{ if and ( .Values.mongodb.externalMongo.kerberos ) ( .Values.mongodb.externalMongo.mongoKRBconf) ( .Values.mongodb.externalMongo.mongoKRBrealm) ( .Values.mongodb.externalMongo.mongoKRBkdc) ( .Values.mongodb.externalMongo.mongoKRBauth) ( .Values.mongodb.externalMongo.mongoKRBlogin) }}
  CONFIG_SERVICE_JVM_KRB_OPTS: "{{ .Values.mongodb.externalMongo.mongoKRBconf }} {{ .Values.mongodb.externalMongo.mongoKRBrealm }} {{ .Values.mongodb.externalMongo.mongoKRBkdc }} {{ .Values.mongodb.externalMongo.mongoKRBauth }} {{ .Values.mongodb.externalMongo.mongoKRBlogin }}"
  NEW_CORR_JVM_KRB_OPTS: "{{ .Values.mongodb.externalMongo.mongoKRBconf }} {{ .Values.mongodb.externalMongo.mongoKRBrealm }} {{ .Values.mongodb.externalMongo.mongoKRBkdc }} {{ .Values.mongodb.externalMongo.mongoKRBauth }} {{ .Values.mongodb.externalMongo.mongoKRBlogin }}"
  {{- end }}
  {{ if and (not .Values.mongodb.enabled) ( .Values.mongodb.externalMongo.enabled) (.Values.mongodb.externalMongo.javaSSLTrustStore) ( .Values.mongodb.externalMongo.javaSSLTrustStorePassword) ( not .Values.mongodb.externalMongo.javaSSLKeyStore) ( not .Values.mongodb.externalMongo.javaSSLKeyStorePassword) }}
  CONFIG_SERVICE_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  NEW_CORR_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  MD_SEARCH_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  PROCESS_MANAGER_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  SNIPPET_PERSISTER_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  CATALOG_PROCESSOR_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  {{- else if and (not .Values.mongodb.enabled) ( .Values.mongodb.externalMongo.enabled) (not .Values.mongodb.externalMongo.mongoX509) (.Values.mongodb.externalMongo.javaSSLTrustStore) ( .Values.mongodb.externalMongo.javaSSLTrustStorePassword) ( .Values.mongodb.externalMongo.javaSSLKeyStore) ( .Values.mongodb.externalMongo.javaSSLKeyStorePassword) }}
  CONFIG_SERVICE_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLKeyStore" . }}  {{ .Values.mongodb.externalMongo.javaSSLKeyStorePassword }} {{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  NEW_CORR_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLKeyStore" . }}  {{ .Values.mongodb.externalMongo.javaSSLKeyStorePassword }} {{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  MD_SEARCH_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLKeyStore" . }}  {{ .Values.mongodb.externalMongo.javaSSLKeyStorePassword }} {{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  PROCESS_MANAGER_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLKeyStore" . }}  {{ .Values.mongodb.externalMongo.javaSSLKeyStorePassword }} {{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  SNIPPET_PERSISTER_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLKeyStore" . }}  {{ .Values.mongodb.externalMongo.javaSSLKeyStorePassword }} {{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  CATALOG_PROCESSOR_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLKeyStore" . }}  {{ .Values.mongodb.externalMongo.javaSSLKeyStorePassword }} {{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  {{- else if and (not .Values.mongodb.enabled) ( .Values.mongodb.externalMongo.enabled) ( .Values.mongodb.externalMongo.mongoX509) (.Values.mongodb.externalMongo.javaSSLTrustStore) ( .Values.mongodb.externalMongo.javaSSLTrustStorePassword) ( .Values.mongodb.externalMongo.javaSSLKeyStore) ( .Values.mongodb.externalMongo.javaSSLKeyStorePassword) }}
  CONFIG_SERVICE_JVM_SSL_OPTS: "{{ include "mongodb.javaX509CaCert" . }}  {{ include "mongodb.javaX509ClientKey" . }}  {{ include "mongodb.javaSSLKeyStore" . }}  {{ .Values.mongodb.externalMongo.javaSSLKeyStorePassword }} {{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  NEW_CORR_JVM_SSL_OPTS: "{{ include "mongodb.javaX509CaCert" . }}  {{ include "mongodb.javaX509ClientKey" . }}  {{ include "mongodb.javaSSLKeyStore" . }}  {{ .Values.mongodb.externalMongo.javaSSLKeyStorePassword }} {{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  MD_SEARCH_JVM_SSL_OPTS: "{{ include "mongodb.javaX509CaCert" . }}  {{ include "mongodb.javaX509ClientKey" . }}  {{ include "mongodb.javaSSLKeyStore" . }}  {{ .Values.mongodb.externalMongo.javaSSLKeyStorePassword }} {{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  PROCESS_MANAGER_JVM_SSL_OPTS: "{{ include "mongodb.javaX509CaCert" . }}  {{ include "mongodb.javaX509ClientKey" . }}  {{ include "mongodb.javaSSLKeyStore" . }}  {{ .Values.mongodb.externalMongo.javaSSLKeyStorePassword }} {{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  SNIPPET_PERSISTER_JVM_SSL_OPTS: "{{ include "mongodb.javaX509CaCert" . }}  {{ include "mongodb.javaX509ClientKey" . }}  {{ include "mongodb.javaSSLKeyStore" . }}  {{ .Values.mongodb.externalMongo.javaSSLKeyStorePassword }} {{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  CATALOG_PROCESSOR_JVM_SSL_OPTS: "{{ include "mongodb.javaX509CaCert" . }}  {{ include "mongodb.javaX509ClientKey" . }}  {{ include "mongodb.javaSSLKeyStore" . }}  {{ .Values.mongodb.externalMongo.javaSSLKeyStorePassword }} {{ include "mongodb.javaSSLTrustStore" . }} {{ .Values.mongodb.externalMongo.javaSSLTrustStorePassword }}"
  {{- else if and ( .Values.mongodb.enabled ) (not .Values.mongodb.externalMongo.enabled) (.Values.mongodb.tls.enabled) }}
  CONFIG_SERVICE_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLKeyStore" . }}  -Djavax.net.ssl.keyStorePassword=password1 {{ include "mongodb.javaSSLTrustStore" . }} -Djavax.net.ssl.trustStorePassword=password1"
  NEW_CORR_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLKeyStore" . }}  -Djavax.net.ssl.keyStorePassword=password1 {{ include "mongodb.javaSSLTrustStore" . }} -Djavax.net.ssl.trustStorePassword=password1"
  MD_SEARCH_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLKeyStore" . }}  -Djavax.net.ssl.keyStorePassword=password1 {{ include "mongodb.javaSSLTrustStore" . }} -Djavax.net.ssl.trustStorePassword=password1"
  PROCESS_MANAGER_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLKeyStore" . }}  -Djavax.net.ssl.keyStorePassword=password1 {{ include "mongodb.javaSSLTrustStore" . }} -Djavax.net.ssl.trustStorePassword=password1"
  SNIPPET_PERSISTER_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLKeyStore" . }}  -Djavax.net.ssl.keyStorePassword=password1 {{ include "mongodb.javaSSLTrustStore" . }} -Djavax.net.ssl.trustStorePassword=password1"
  CATALOG_PROCESSOR_JVM_SSL_OPTS: "{{ include "mongodb.javaSSLKeyStore" . }}  -Djavax.net.ssl.keyStorePassword=password1 {{ include "mongodb.javaSSLTrustStore" . }} -Djavax.net.ssl.trustStorePassword=password1"
  {{- end }}
